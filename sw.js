self.addEventListener("push",t=>{let i;try{i=t.data.json()}catch{i={title:"New Notification",options:{body:t.data.text()}}}const o={body:i.options.body,icon:"./images/logo.png",badge:"./favicon.png",data:{url:"/stories"},vibrate:[200,100,200],requireInteraction:!0};t.waitUntil(self.registration.showNotification(i.title,o))});self.addEventListener("notificationclick",t=>{t.notification.close(),t.waitUntil(clients.openWindow(t.notification.data.url))});self.addEventListener("message",t=>{if(t.data&&t.data.type==="SHOW_NOTIFICATION"){const{title:i,options:o}=t.data,a={...o,vibrate:[200,100,200],requireInteraction:!0,icon:"./images/logo.png",badge:"./favicon.png"};t.waitUntil(self.registration.showNotification(i,a))}});
